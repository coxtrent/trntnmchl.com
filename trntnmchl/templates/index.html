<!DOCTYPE html>
<html lang="en">
<head>
    <script src="static/js/invertLogos.js"></script>
    <style>
 
        body {
    background-color: #ffffff; /*2a9cb1; initial color */
    transition: background-color 0.5s ease-in; /* transition effect */
        }
        body.colorMain {
            background-color: #ffffff; /* new color */
        }
        body.colorYellow {
            background-color: #ec865d;
        }
        body.colorPink {
            background-color: #d68c9c;
        }
        body.colorGreen {
            background-color: #298e5e;
        }
        body.colorTan {
            background-color: #eac9a8;
        }
        #album_art {
            max-width: 70%;
            height: auto;
            display: block;
            margin: 10px auto;
            transition: all 1s ease-in-out;
            opacity: 0;
        }

        #links {
            opacity: 0;
        }
    </style>
    <meta charset="UTF-8">
    <title>sunboyforever.</title>
    <link rel="icon" href="static/images/sunstone.webp">
    <link rel="stylesheet" href="static/css/style.css">
    <script>

        function changeArt() {
            // pre-load all images
            var img1 = new Image();
            var img2 = new Image();
            var img3 = new Image();
            var img4 = new Image();

            var loadImg1 = new Promise(function(resolve) {
                img1.onload = resolve;
                img1.src = "static/images/see-you-in-june-yellow.webp";
            });

            var loadImg2 = new Promise(function(resolve) {
                img2.onload = resolve;
                img2.src = "static/images/see-you-in-june-green.webp";
            });

            var loadImg3 = new Promise(function(resolve) {
                img3.onload = resolve;
                img3.src = "static/images/see-you-in-june-pink.webp";
            });

            var loadImg4 = new Promise(function(resolve) {
                img4.onload = resolve;
                img4.src = "static/images/see-you-in-june-tan.webp";
            });

            Promise.all([loadImg1, loadImg2, loadImg3, loadImg4]).then(function() {
                // await promises, fetch album_art
                var image = document.getElementById('album_art');
                image.style.opacity = 0;
                // fetch url and parse the suffix
                setInterval(function() {
                var url = new URL(image.src);
                var path = url.pathname;
                if(path == "/static/images/see-you-in-june-green.webp") {
                // if is alt album art, change to mario album art
                    setTimeout(function() {
                        image.src = img3.src;
                        image.style.opacity = 1;
                        document.body.style.backgroundColor = "#d68c9c";
                    }, 250);
                }
                else if(path == "/static/images/see-you-in-june-pink.webp") {
                // if it is mario album art, change to main album art
                    setTimeout(function() {
                        image.src = img4.src;
                        image.style.opacity = 1;
                        document.body.style.backgroundColor = "#eac9a8";
                    }, 250);
                }
                else if(path == "/static/images/see-you-in-june-tan.webp") {
                // if it is mario album art, change to main album art
                    setTimeout(function() {
                        image.src = img1.src;
                        image.style.opacity = 1;
                        document.body.style.backgroundColor = "#ec865d";
                    }, 250);
                }
                else {
                // it must be main album art, change to alt album art
                    setTimeout(function() {
                        image.src = img2.src;
                        image.style.opacity = 1;
                        document.body.style.backgroundColor = "#298e5e";
                    }, 250);
                }
            }, 1250);
            })
        }   

        /* ONLOAD ANIMATION */ 
        window.onload = function() {
            // make navbar invisible and unclickable at start
            document.getElementById('links').style.opacity = 0; 
            var navbar = document.querySelector('.navbar');
            navbar.style.opacity = '0';
            navbar.style.pointerEvents = 'none';
            var body = document.querySelector('body');
            body.style.marginRight = '0px'; // reset margin-right to 0
            // invert logos bc theyre just better that way
            invertLogos(true);
            // get elements
            var album_art = document.getElementById('album_art');
            var links = document.getElementById('links');

            // external setTimeout -- fade in the cream background color and the sunboy logo
            setTimeout(function() {
                document.body.style.backgroundColor = "#fffaaf";
                album_art.style.opacity = 1;
                // internal setTimeout 1 -- fade the background color and the sunboy logo out
                setTimeout(function() {
                document.body.style.backgroundColor = "#ffffff";
                album_art.style.opacity = 0;
                }, 2250);
            }, 250);
            // internal setTimeout 2 -- fetch the album art and change it 
            setTimeout(function() {
            var real_art = new Image();
                var load_real_art = new Promise(function(resolve) {
                    real_art.onload = resolve;
                    real_art.src = "static/images/see-you-in-june-yellow.webp";
                });
            Promise.all([load_real_art]).then(function() {
                        album_art.src = real_art.src;
                        // internal setTimeout 3 -- actually fade in the links, album art, and background
                        setTimeout(function() {
                            var navbar = document.querySelector('.navbar'); 
                            album_art.style.opacity = 1;
                            links.style.opacity = 1;
                            document.body.style.backgroundColor = "#ec865d"
                            navbar.style.opacity = '1';
                            navbar.style.pointerEvents = 'auto'; // Make the navbar clickable
                            body.style.marginRight = '150px'; // reset margin-right to 150px
                        }, 1500);
                        changeArt();
                    });
                }, 3500);

        }

        </script>
</head>
<body> 
    {% include 'navbar.html' %}
<div style="display: block; margin-left: auto; margin-right: auto; margin-top: 17px;"> 
<img id="album_art" src="static/images/sunstone.webp" width="600" height="600" style="display: block; margin-left: auto; margin-right: auto; margin-top: 10%; transition: all 1s ease-in-out; opacity: 0;"> <!-- opacity 0.25s transition:-->
</div>
<div class="spacer"></div> <!-- Spacer div -->
    {% include 'see-you-in-june-links.html' %}
</body>
</html>